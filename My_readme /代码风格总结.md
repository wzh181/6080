# å‰ç«¯ä»£ç é£æ ¼æŒ‡å—

> åŸºäº airbrbã€slackrã€frontend ç­‰é¡¹ç›®çš„ä»£ç é£æ ¼è§„èŒƒ

---

## ğŸ“‹ ç›®å½•

1. [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
2. [ä»£ç ç»„ç»‡è§„åˆ™](#ä»£ç ç»„ç»‡è§„åˆ™)
3. [React ç»„ä»¶è§„èŒƒ](#react-ç»„ä»¶è§„èŒƒ)
4. [æ ·å¼å¤„ç†](#æ ·å¼å¤„ç†)
5. [API è°ƒç”¨è§„èŒƒ](#api-è°ƒç”¨è§„èŒƒ)
6. [å‘½åè§„èŒƒ](#å‘½åè§„èŒƒ)
7. [å®Œæ•´æ¨¡æ¿](#å®Œæ•´æ¨¡æ¿)

---

## ğŸ“ é¡¹ç›®ç»“æ„

### æ ‡å‡†ç›®å½•ç»“æ„

```
src/
â”œâ”€â”€ components/          # å¯å¤ç”¨ç»„ä»¶ï¼ˆNavbar, Footer, Cardç­‰ï¼‰
â”œâ”€â”€ pages/              # é¡µé¢ç»„ä»¶ï¼ˆHomePage, LoginPageç­‰ï¼‰
â”œâ”€â”€ context/            # Context APIï¼ˆAuthContextç­‰ï¼‰
â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•°ï¼ˆapi.js, helpers.jsï¼‰
â”œâ”€â”€ App.jsx             # ä¸»åº”ç”¨å…¥å£
â””â”€â”€ main.jsx            # React å…¥å£æ–‡ä»¶
```

**è§„åˆ™ï¼š**
- âœ… ç»„ä»¶æ”¾åœ¨ `components/`ï¼Œé¡µé¢æ”¾åœ¨ `pages/`
- âœ… å·¥å…·å‡½æ•°æ”¾åœ¨ `utils/`
- âœ… Context æ”¾åœ¨ `context/`
- âœ… æ¯ä¸ªæ–‡ä»¶ä¸€ä¸ªä¸»è¦åŠŸèƒ½

---

## ğŸ“ ä»£ç ç»„ç»‡è§„åˆ™

### 1. å¯¼å…¥é¡ºåºï¼ˆå¿…é¡»éµå®ˆï¼‰

```javascript
// 1. React æ ¸å¿ƒ
import { useState, useEffect } from 'react';

// 2. ç¬¬ä¸‰æ–¹åº“ï¼ˆMaterial-UIï¼‰
import {
  Container,
  Grid,
  Typography,
  Box,
  Button,
} from '@mui/material';
import SearchIcon from '@mui/icons-material/Search';

// 3. è·¯ç”±
import { useNavigate, Link } from 'react-router-dom';

// 4. è‡ªå®šä¹‰ Context/Hooks
import { useAuth } from '../context/AuthContext';

// 5. å·¥å…·å‡½æ•°
import { getAllListings } from '../utils/api';

// 6. ç»„ä»¶
import ListingCard from '../components/ListingCard';

// 7. æ ·å¼ï¼ˆå¦‚æœæœ‰ï¼‰
import './HomePage.css';
```

**è§„åˆ™ï¼š**
- âœ… æŒ‰ç±»å‹åˆ†ç»„ï¼Œæ¯ç»„ä¹‹é—´ç©ºè¡Œ
- âœ… ä½¿ç”¨æ³¨é‡Šåˆ†éš”ä¸åŒç±»åˆ«
- âœ… ç›¸å¯¹è·¯å¾„å¯¼å…¥ï¼ˆ`../` æˆ– `./`ï¼‰

---

## âš›ï¸ React ç»„ä»¶è§„èŒƒ

### 1. ç»„ä»¶å®šä¹‰

```javascript
// âœ… ä½¿ç”¨å‡½æ•°ç»„ä»¶ï¼ˆä¸ä½¿ç”¨ç±»ç»„ä»¶ï¼‰
const MyComponent = ({ prop1, prop2 = 'default' }) => {
  // ç»„ä»¶é€»è¾‘
  return (
    <Box>
      {/* JSX */}
    </Box>
  );
};

export default MyComponent;
```

**è§„åˆ™ï¼š**
- âœ… å‡½æ•°ç»„ä»¶ï¼Œä¸ä½¿ç”¨ç±»ç»„ä»¶
- âœ… ä½¿ç”¨ç®­å¤´å‡½æ•°æˆ– function å£°æ˜
- âœ… Props ä½¿ç”¨é»˜è®¤å‚æ•°
- âœ… å•ä¸€èŒè´£åŸåˆ™

### 2. Hooks ä½¿ç”¨

#### useState

```javascript
// âœ… å¯¹è±¡çŠ¶æ€
const [formData, setFormData] = useState({
  email: '',
  password: '',
});

// âœ… æ•°ç»„çŠ¶æ€
const [listings, setListings] = useState([]);

// âœ… æ›´æ–°çŠ¶æ€ï¼ˆå¯¹è±¡ï¼‰
setFormData((prev) => ({
  ...prev,
  [name]: value,
}));

// âœ… æ›´æ–°çŠ¶æ€ï¼ˆæ•°ç»„ï¼‰
setListings([...listings, newItem]);
```

#### useEffect

```javascript
// âœ… ç»„ä»¶æŒ‚è½½æ—¶æ‰§è¡Œ
useEffect(() => {
  fetchData();
}, []);

// âœ… ä¾èµ–é¡¹å˜åŒ–æ—¶æ‰§è¡Œ
useEffect(() => {
  if (isAuthenticated()) {
    fetchUserData();
  }
}, [isAuthenticated]);

// âœ… æ¸…ç†å‡½æ•°
useEffect(() => {
  const interval = setInterval(() => {
    // ...
  }, 1000);
  return () => clearInterval(interval);
}, []);
```

### 3. äº‹ä»¶å¤„ç†

```javascript
// âœ… ç®€å•æ“ä½œï¼šå†…è”ç®­å¤´å‡½æ•°
<Button onClick={() => navigate('/')}>Home</Button>

// âœ… å¤æ‚é€»è¾‘ï¼šå‘½åå‡½æ•°
const handleSubmit = async (e) => {
  e.preventDefault();
  try {
    const response = await apiLogin(formData.email, formData.password);
    login(response.token, formData.email);
    navigate('/');
  } catch (error) {
    setAlertMessage(error.message);
  }
};

// âœ… è¡¨å•è¾“å…¥å¤„ç†
const handleChange = (e) => {
  const { name, value } = e.target;
  setFormData((prev) => ({
    ...prev,
    [name]: value,
  }));
};
```

### 4. æ¡ä»¶æ¸²æŸ“

```javascript
// âœ… ä¸‰å…ƒè¿ç®—ç¬¦
{isAuthenticated() ? (
  <Button onClick={handleLogout}>Logout</Button>
) : (
  <Button onClick={() => navigate('/login')}>Login</Button>
)}

// âœ… && è¿ç®—ç¬¦ï¼ˆå•ä¸€æ¡ä»¶ï¼‰
{hasBooking && (
  <Chip label="Your Booking" color="success" />
)}

// âœ… å¤æ‚æ¡ä»¶ï¼ˆæå–å‡½æ•°æˆ–å˜é‡ï¼‰
{filteredListings.length === 0 ? (
  <Box>No listings found</Box>
) : (
  <Grid container>
    {filteredListings.map((listing) => (
      <Grid item key={listing.id}>
        <ListingCard listing={listing} />
      </Grid>
    ))}
  </Grid>
)}
```

### 5. è¡¨å•å¤„ç†

```javascript
// âœ… å—æ§ç»„ä»¶
const [formData, setFormData] = useState({
  email: '',
  password: '',
});

const handleChange = (e) => {
  const { name, value } = e.target;
  setFormData((prev) => ({
    ...prev,
    [name]: value,
  }));
  // æ¸…é™¤é”™è¯¯
  if (errors[name]) {
    setErrors((prev) => ({
      ...prev,
      [name]: '',
    }));
  }
};

// âœ… éªŒè¯å‡½æ•°
const validate = () => {
  const newErrors = {};
  if (!formData.email) {
    newErrors.email = 'Email is required';
  } else if (!/\S+@\S+\.\S+/.test(formData.email)) {
    newErrors.email = 'Email is invalid';
  }
  setErrors(newErrors);
  return Object.keys(newErrors).length === 0;
};

// âœ… æäº¤å¤„ç†
const handleSubmit = async (e) => {
  e.preventDefault();
  if (validate()) {
    try {
      const response = await apiLogin(formData.email, formData.password);
      login(response.token, formData.email);
      navigate('/');
    } catch (error) {
      setAlertMessage(error.message || 'Login failed');
    }
  }
};
```

---

## ğŸ¨ æ ·å¼å¤„ç†

### Material-UI sx propï¼ˆæ¨èï¼‰

```javascript
// âœ… åŸºç¡€æ ·å¼
<Box
  sx={{
    display: 'flex',
    flexDirection: 'column',
    minHeight: '100vh',
    backgroundColor: '#f7f7f7',
  }}
>

// âœ… å“åº”å¼æ ·å¼
<Box
  sx={{
    display: { xs: 'none', md: 'block' },
    width: { xs: '100%', sm: '50%', md: '33%' },
  }}
>

// âœ… ä¸»é¢˜é¢œè‰²å’Œæ‚¬åœæ•ˆæœ
<Button
  sx={{
    backgroundColor: '#FF5A5F',
    '&:hover': {
      backgroundColor: '#ff787d',
    },
  }}
>
```

**è§„åˆ™ï¼š**
- âœ… ä½¿ç”¨ `sx` propï¼Œä¸ä½¿ç”¨ `style` propï¼ˆé™¤éå¿…è¦ï¼‰
- âœ… å“åº”å¼ä½¿ç”¨å¯¹è±¡è¯­æ³•ï¼š`{ xs: value, md: value }`
- âœ… é¢œè‰²ä½¿ç”¨ä¸»é¢˜æˆ–åå…­è¿›åˆ¶å€¼
- âœ… æ‚¬åœæ•ˆæœä½¿ç”¨ `&:hover`

---

## ğŸ”Œ API è°ƒç”¨è§„èŒƒ

### 1. ç»Ÿä¸€ API å·¥å…·å‡½æ•°

```javascript
// utils/api.js
const API_URL = `http://localhost:${config.BACKEND_PORT}`;

export const apiCall = async (endpoint, method = 'GET', body = null, token = null) => {
  const headers = {
    'Content-Type': 'application/json',
  };

  if (token) {
    headers.Authorization = `Bearer ${token}`;
  }

  const options = {
    method,
    headers,
  };

  if (body && method !== 'GET') {
    options.body = JSON.stringify(body);
  }

  const response = await fetch(`${API_URL}${endpoint}`, options);
  const data = await response.json();

  if (!response.ok) {
    throw new Error(data.error || 'Something went wrong');
  }

  return data;
};

// âœ… å…·ä½“ API å‡½æ•°
export const login = (email, password) => 
  apiCall('/user/auth/login', 'POST', { email, password });

export const getAllListings = () => 
  apiCall('/listings', 'GET');
```

### 2. åœ¨ç»„ä»¶ä¸­ä½¿ç”¨

```javascript
// âœ… async/await å¤„ç†
const fetchListings = async () => {
  try {
    const response = await getAllListings();
    setListings(response.listings);
  } catch (error) {
    console.error('Failed to fetch listings:', error);
    setAlertMessage(error.message);
  }
};

// âœ… åœ¨ useEffect ä¸­è°ƒç”¨
useEffect(() => {
  fetchListings();
}, []);
```

**è§„åˆ™ï¼š**
- âœ… ç»Ÿä¸€ä½¿ç”¨ `apiCall` å‡½æ•°
- âœ… ä½¿ç”¨ async/awaitï¼Œä¸ä½¿ç”¨ .then()
- âœ… é”™è¯¯å¤„ç†ä½¿ç”¨ try-catch
- âœ… Token è‡ªåŠ¨æ·»åŠ åˆ° headers

---

## ğŸ·ï¸ å‘½åè§„èŒƒ

### ç»„ä»¶å‘½å

```javascript
// âœ… PascalCase
const ListingCard = () => {};
const HomePage = () => {};
const BookingDialog = () => {};
```

### å‡½æ•°å‘½å

```javascript
// âœ… camelCaseï¼ŒåŠ¨è¯å¼€å¤´
const handleSubmit = () => {};
const fetchListings = () => {};
const calculateAverageRating = () => {};
const validateForm = () => {};
```

### å˜é‡å‘½å

```javascript
// âœ… camelCase
const searchQuery = '';
const userBookings = [];
const isAuthenticated = true;
```

### å¸¸é‡å‘½å

```javascript
// âœ… UPPER_SNAKE_CASE
const API_URL = 'http://localhost:5000';
const CACHE_PREFIX = 'slackr_cache_';
const CACHE_EXPIRY = 24 * 60 * 60 * 1000;
```

**è§„åˆ™ï¼š**
- âœ… ç»„ä»¶ï¼šPascalCase
- âœ… å‡½æ•°/å˜é‡ï¼šcamelCase
- âœ… å¸¸é‡ï¼šUPPER_SNAKE_CASE
- âœ… å¸ƒå°”å€¼ï¼šis/has/can å¼€å¤´

---

## ğŸ¯ Context API ä½¿ç”¨

### 1. Context å®šä¹‰

```javascript
// context/AuthContext.jsx
import { createContext, useState, useContext, useEffect } from 'react';

const AuthContext = createContext(null);

export const AuthProvider = ({ children }) => {
  const [token, setToken] = useState(localStorage.getItem('token'));
  const [userEmail, setUserEmail] = useState(localStorage.getItem('userEmail'));

  // âœ… åŒæ­¥ localStorage
  useEffect(() => {
    if (token) {
      localStorage.setItem('token', token);
    } else {
      localStorage.removeItem('token');
    }
  }, [token]);

  const login = (newToken, email) => {
    setToken(newToken);
    setUserEmail(email);
  };

  const logout = () => {
    setToken(null);
    setUserEmail(null);
    localStorage.removeItem('token');
    localStorage.removeItem('userEmail');
  };

  const isAuthenticated = () => {
    return !!token;
  };

  return (
    <AuthContext.Provider value={{ token, userEmail, login, logout, isAuthenticated }}>
      {children}
    </AuthContext.Provider>
  );
};

// âœ… è‡ªå®šä¹‰ Hook
export const useAuth = () => {
  const context = useContext(AuthContext);
  if (!context) {
    throw new Error('useAuth must be used within an AuthProvider');
  }
  return context;
};
```

### 2. åœ¨ç»„ä»¶ä¸­ä½¿ç”¨

```javascript
// âœ… ä½¿ç”¨è‡ªå®šä¹‰ Hook
const { token, userEmail, login, logout, isAuthenticated } = useAuth();
```

---

## ğŸ“¦ å®Œæ•´æ¨¡æ¿

### App.jsx æ¨¡æ¿

```javascript
import { BrowserRouter, Routes, Route } from 'react-router-dom';
import { ThemeProvider, createTheme } from '@mui/material/styles';
import CssBaseline from '@mui/material/CssBaseline';
import Box from '@mui/material/Box';

// Context
import { AuthProvider } from './context/AuthContext';

// Components
import Navbar from './components/Navbar';
import Footer from './components/Footer';

// Pages
import HomePage from './pages/HomePage';
import LoginPage from './pages/LoginPage';
import RegisterPage from './pages/RegisterPage';

// Theme
const theme = createTheme({
  palette: {
    primary: {
      main: '#FF5A5F',
    },
    secondary: {
      main: '#00A699',
    },
  },
  typography: {
    fontFamily: '"Roboto", "Helvetica", "Arial", sans-serif',
  },
});

function App() {
  return (
    <ThemeProvider theme={theme}>
      <CssBaseline />
      <AuthProvider>
        <BrowserRouter>
          <Box sx={{ display: 'flex', flexDirection: 'column', minHeight: '100vh' }}>
            <Navbar />
            <Box component="main" sx={{ flex: 1 }}>
              <Routes>
                <Route path="/" element={<HomePage />} />
                <Route path="/login" element={<LoginPage />} />
                <Route path="/register" element={<RegisterPage />} />
              </Routes>
            </Box>
            <Footer />
          </Box>
        </BrowserRouter>
      </AuthProvider>
    </ThemeProvider>
  );
}

export default App;
```

### é¡µé¢ç»„ä»¶æ¨¡æ¿

```javascript
import { useState, useEffect } from 'react';
import {
  Container,
  Typography,
  Box,
  Button,
  Paper,
} from '@mui/material';
import { useNavigate } from 'react-router-dom';
import { useAuth } from '../context/AuthContext';
import { fetchData } from '../utils/api';

const MyPage = () => {
  const navigate = useNavigate();
  const { token, isAuthenticated } = useAuth();
  const [data, setData] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState('');

  useEffect(() => {
    const loadData = async () => {
      try {
        const response = await fetchData(token);
        setData(response.data);
      } catch (error) {
        console.error('Error:', error);
        setError(error.message);
      } finally {
        setLoading(false);
      }
    };
    loadData();
  }, [token]);

  const handleAction = async () => {
    try {
      // æ‰§è¡Œæ“ä½œ
    } catch (error) {
      setError(error.message);
    }
  };

  if (loading) {
    return (
      <Box sx={{ textAlign: 'center', py: 4 }}>
        <Typography>Loading...</Typography>
      </Box>
    );
  }

  return (
    <Container maxWidth="lg" sx={{ py: 4 }}>
      <Paper elevation={2} sx={{ p: 3 }}>
        <Typography variant="h4" component="h1" gutterBottom>
          Page Title
        </Typography>
        
        {error && (
          <Typography color="error" sx={{ mb: 2 }}>
            {error}
          </Typography>
        )}

        {/* é¡µé¢å†…å®¹ */}
      </Paper>
    </Container>
  );
};

export default MyPage;
```

### ç»„ä»¶æ¨¡æ¿

```javascript
import { useState } from 'react';
import {
  Card,
  CardContent,
  Typography,
  Box,
  Button,
} from '@mui/material';
import { useNavigate } from 'react-router-dom';

const MyComponent = ({ data, onAction = null }) => {
  const navigate = useNavigate();
  const [localState, setLocalState] = useState('');

  const handleClick = () => {
    if (onAction) {
      onAction();
    } else {
      navigate('/default-path');
    }
  };

  return (
    <Card
      sx={{
        cursor: 'pointer',
        transition: 'transform 0.2s',
        '&:hover': {
          transform: 'translateY(-4px)',
          boxShadow: 6,
        },
      }}
      onClick={handleClick}
    >
      <CardContent>
        <Typography variant="h6" component="div">
          {data.title}
        </Typography>
        {/* ç»„ä»¶å†…å®¹ */}
      </CardContent>
    </Card>
  );
};

export default MyComponent;
```

---

## âœ… å…³é”®è§„åˆ™æ€»ç»“

### å¿…é¡»éµå®ˆ

1. **å¯¼å…¥é¡ºåº**ï¼šReact â†’ ç¬¬ä¸‰æ–¹åº“ â†’ è·¯ç”± â†’ Context â†’ å·¥å…· â†’ ç»„ä»¶ â†’ æ ·å¼
2. **ç»„ä»¶ç±»å‹**ï¼šåªä½¿ç”¨å‡½æ•°ç»„ä»¶ï¼Œä¸ä½¿ç”¨ç±»ç»„ä»¶
3. **Hooks ä½¿ç”¨**ï¼šuseState, useEffect, useContext
4. **æ ·å¼æ–¹å¼**ï¼šMaterial-UI ä½¿ç”¨ `sx` prop
5. **API è°ƒç”¨**ï¼šç»Ÿä¸€ä½¿ç”¨ `apiCall` å‡½æ•°ï¼Œasync/await å¤„ç†
6. **å‘½åè§„èŒƒ**ï¼šç»„ä»¶ PascalCaseï¼Œå‡½æ•°/å˜é‡ camelCaseï¼Œå¸¸é‡ UPPER_SNAKE_CASE

### ä»£ç ç»„ç»‡

1. **æ–‡ä»¶ç»“æ„**ï¼šcomponents/, pages/, context/, utils/
2. **å•ä¸€èŒè´£**ï¼šæ¯ä¸ªæ–‡ä»¶ä¸€ä¸ªä¸»è¦åŠŸèƒ½
3. **é”™è¯¯å¤„ç†**ï¼šæ‰€æœ‰ API è°ƒç”¨ä½¿ç”¨ try-catch
4. **çŠ¶æ€ç®¡ç†**ï¼šæœ¬åœ°çŠ¶æ€ç”¨ useStateï¼Œå…¨å±€çŠ¶æ€ç”¨ Context

### æœ€ä½³å®è·µ

1. **å¯è¯»æ€§ä¼˜å…ˆ**ï¼šä»£ç æ¸…æ™°ï¼Œæ³¨é‡Šå¿…è¦éƒ¨åˆ†
2. **ä¸€è‡´æ€§**ï¼šä¿æŒä»£ç é£æ ¼ç»Ÿä¸€
3. **å¯ç»´æŠ¤æ€§**ï¼šç»„ä»¶åŒ–ï¼Œå¯å¤ç”¨
4. **æ€§èƒ½**ï¼šåˆç†ä½¿ç”¨ useEffect ä¾èµ–é¡¹

---

## ğŸ“š å‚è€ƒèµ„æº

- React å®˜æ–¹æ–‡æ¡£ï¼šhttps://react.dev
- Material-UI æ–‡æ¡£ï¼šhttps://mui.com
- React Router æ–‡æ¡£ï¼šhttps://reactrouter.com

---

**è®°ä½ï¼šä»£ç é£æ ¼è¦ä¸€è‡´ï¼Œå¯è¯»æ€§ä¼˜å…ˆï¼** âœ¨
